<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Worp Book</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="scroll/index.html"><strong aria-hidden="true">1.</strong> The Scroll Macro Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="scroll/macro-documents.html"><strong aria-hidden="true">1.1.</strong> Macro Documents</a></li><li class="chapter-item expanded "><a href="scroll/documentation-section.html"><strong aria-hidden="true">1.2.</strong> Documentation Section</a></li><li class="chapter-item expanded "><a href="scroll/variables-section.html"><strong aria-hidden="true">1.3.</strong> Variables Section</a></li><li class="chapter-item expanded "><a href="scroll/body-section.html"><strong aria-hidden="true">1.4.</strong> Body Section</a></li><li class="chapter-item expanded "><a href="scroll/sub-macros.html"><strong aria-hidden="true">1.5.</strong> Sub-Macros</a></li><li class="chapter-item expanded "><a href="scroll/macro-execution.html"><strong aria-hidden="true">1.6.</strong> Macro Execution</a></li></ol></li><li class="chapter-item expanded "><a href="dice/index.html"><strong aria-hidden="true">2.</strong> The Dice Language</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Worp Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>Worp is what's known as a Virtual Tabletop.
It can be used to play role playing games, war games, strategy games, and even board games.</p>
<p>This book will introduce you to the concepts of Worp, to help you get the most out of the system as a Game Master, player, map designer, module designer, or even game designer.</p>
<h1><a class="header" href="#the-scroll-macro-language" id="the-scroll-macro-language">The Scroll Macro Language</a></h1>
<p>Worp uses a custom text processing and templating language called Scroll for evaluating and running macros within the table top environment.
It is one of the core components of the Worp Virtual Table Top and acts as a method of automating the various actions performed in a game.
It is targeted towards various groups of individuals interacting with Worp over the course of developing and play a table top game.</p>
<h2><a class="header" href="#who-scroll-is-for" id="who-scroll-is-for">Who Scroll is For</a></h2>
<p>Scroll targets a wide audience of Game Masters, players, module and map designers, and people designing their own table top games and systems.</p>
<h3><a class="header" href="#game-masters" id="game-masters">Game Masters</a></h3>
<p>Game Masters will find themselves frequently interacting with and possibly writing Scroll macros over the course of a game.
They're made available through various context menus and hot bars associated with the tokens on the field.
Game Masters can also access and run macros that aren't related to any specific token.
Scroll allows Game Masters to quickly execute actions they need to perform throughout the course of a game, such as actions performed by NPCs, monsters, environmental interactions, etc.</p>
<h3><a class="header" href="#players" id="players">Players</a></h3>
<p>Players will frequently use Scroll macros from their own tokens to perform actions throughout the course of a game.
They're made available through various context menus and hot bars associated with the tokens owned by a player.</p>
<h3><a class="header" href="#module-and-map-designers" id="module-and-map-designers">Module and Map Designers</a></h3>
<p>Module and map designers will likely find themselves writing Scroll macros to give their world life and to provide actions for Game Masters and players to interact with.</p>
<h3><a class="header" href="#table-top-designers" id="table-top-designers">Table Top Designers</a></h3>
<p>Table Top Designers will leverage Scroll to model their table top system by using it to encode all the rules and actions of their system as macros.
In this case Scroll will be frequently used to create the basic templates needed for the other groups mentioned above to play a table top system.</p>
<h1><a class="header" href="#macro-documents" id="macro-documents">Macro Documents</a></h1>
<p>This chapter covers the concepts that appear in a Scroll macro, known as a macro document.  These concepts are crucial to writing macros for Worp.</p>
<p>Specifically, you'll learn about the different sections of a macro document, which is composed of the documentation section, the variables section, the document body, and named sub-macros.
These sections are the core of every macro in Worp, and learning them will give you strong foundation for successful macro authoring.</p>
<h1><a class="header" href="#documentation-section" id="documentation-section">Documentation Section</a></h1>
<p>The first section of a Scroll macro document is an optional section for documenting a macro.
This section always come first within a document and looks like this:</p>
<pre><code>&gt; This is documentation on my super cool macro!
&gt; Roll an attack for 1d20 + strength modifier
</code></pre>
<p>Each line in the document section must start with the <code>&gt;</code> character and can be followed by any other character.
An example of this fact looks like this:</p>
<pre><code>&gt; I ❤ Macros!
</code></pre>
<p>The document section can be as long as you like, as long as this format is followed.</p>
<h1><a class="header" href="#variables-section" id="variables-section">Variables Section</a></h1>
<p>The second section of a Scroll macro document is an optional section for declaring variables that can be used in the body section.
If this section is included must either follow the documentation section or by the first section of a document, if no documentation section is included.</p>
<p>If there's no documentation section, the variable section would look like:</p>
<pre><code>$str_mod := {% global.ability_mods[self.str] %}
</code></pre>
<p>If a documentation section is included, the document would look like:</p>
<pre><code>&gt; This is documentation on my super cool macro!
&gt; Roll an attack for 1d20 + strength modifier

$str_mod := {% global.ability_mods[self.str] %}
</code></pre>
<p>There's two major components of a variable declaration.  Those are the variable's name and the expression body that's evaluated and assigned to the variable for the remainder of the macro.</p>
<p>Names all start with the <code>$</code> character to denote that a variable is being declared (or used) in the document.  The name itself can then either start with <code>_</code> or any upper or lower case letter from A to Z.  Then can be proceeded by any number of <code>_</code>, letters, or numbers.</p>
<p>To indicate that a variable is being declared and simply not being used, its name must be followed by <code>:= {% ... %}</code> to indicate that an expression is being assigned to the variable.  The exact format of the expressions that can be used in place of the <code>...</code> is covered in a later chapter on the <a href="scroll/../dice/index.html">Dice language</a>.</p>
<p>You can declare zero or more variables in this section.  Those variables declared later can use the results of the previously declared variables, for example:</p>
<pre><code>$x = {% 8d6 %}
$y = {% x + 2 %}
$z = {% y * 2 %}
</code></pre>
<h2><a class="header" href="#scopes" id="scopes">Scopes</a></h2>
<p>A variable scope is defined as the region where a named variable is able to be used.  In a Scroll macro document, any variables declared in the variables section are available in the body section of the macro itself and in the bodies of any <a href="scroll/./sub-macros.html">sub-macros</a>.  Any variables declared in a sub-macro are only available to that specific sub-macro and cannot be used outside that sub-macro's definition.</p>
<h1><a class="header" href="#body-section" id="body-section">Body Section</a></h1>
<p>The third, and only required section, of a Scroll macro document is the body.
The body defines the actual text and actions to be performed by a macro.</p>
<p>It must either start a document or follow the document and variable sections, both of which are optional.
A simple macro with only a body might look like:</p>
<pre><code>{% self.name %} attacks and rolls *{% 1d20 %}*!
</code></pre>
<p>A more complex example using the other document sections would look like:</p>
<pre><code>&gt; This is documentation on my super cool macro!
&gt; Roll an attack for 1d20 + strength modifier

$str_mod := {% global.ability_mods[self.str] %}

{% self.name %} attacks and rolls *{% 1d20 + str_mod %}*!
</code></pre>
<p>Both of these macros would produce an output similar to:</p>
<blockquote>
<p>Player attacks and rolls <strong>19</strong>!</p>
</blockquote>
<p>All spacing in the macro body is preserved in the output.  For example:</p>
<pre><code>This
    Macro
        Indents
            Each
                Line
</code></pre>
<p>Would produce an output with each line indented as above.</p>
<h2><a class="header" href="#text-formatting" id="text-formatting">Text Formatting</a></h2>
<p>The body section offers some basic text formatting.
Formatting can provide some flavor to your macros and allow you to draw attention to specific information in a macro's output.</p>
<p>The formatters are as follows:</p>
<ul>
<li><code>*bold*</code> produces <strong>bold</strong> text</li>
<li><code>~italic~</code> produces <em>italic</em> text</li>
<li><code>_underline_</code> produces <ins>underline</ins> text</li>
<li><code>-strike through-</code> produces <del>strike through</del> text</li>
</ul>
<h3><a class="header" href="#format-nesting" id="format-nesting">Format Nesting</a></h3>
<p>These formats can be nested inside of each other.
Like this:</p>
<pre><code>*this is all bold ~and this part is italic bold~ while _this is bold underlined_ and this is ~_bold strike through underlined_~*
</code></pre>
<p>Would produce text like:</p>
<blockquote>
<p><strong>this is all bold <em>and this part is italic bold</em> while <ins>this is bold underlined</ins> and this is <del><ins>bold strike through underlined</ins></del></strong></p>
</blockquote>
<h2><a class="header" href="#substitution-expressions" id="substitution-expressions">Substitution Expressions</a></h2>
<p>Substitution expressions take on a form similar to the expression body of a variable declaration as seen in the variables section.
They are placeholders for text that will be computed at the time the macro is executed.
An example of this looks like:</p>
<pre><code>Roll a d20! {% 1d20 %}
</code></pre>
<p>Which when run could produce an output similar to:</p>
<blockquote>
<p>Roll a d20! 12</p>
</blockquote>
<p>The syntax of the inside of a substitution expression is defined in the chapter on the <a href="scroll/../dice/index.html">Dice</a> language.</p>
<h3><a class="header" href="#variable-substitutions" id="variable-substitutions">Variable Substitutions</a></h3>
<p>A second form of substitution expression is the direct reference to a variable, such as:</p>
<pre><code>$str_mod := {% global.ability_mods[self.str] %}

My strength mod is $str_mod.
</code></pre>
<p>This would produce an output similar to:</p>
<blockquote>
<p>My strength mod is 5.</p>
</blockquote>
<h3><a class="header" href="#text-formatting-expressions" id="text-formatting-expressions">Text Formatting Expressions</a></h3>
<p>Both forms of substitution expressions can be nested inside text formatters, to give their outputs a nice flair, like:</p>
<pre><code>You roll *{% 1d20 %}*
</code></pre>
<p>Would produce an output similar to:</p>
<blockquote>
<p>You roll <strong>20</strong></p>
</blockquote>
<h2><a class="header" href="#embedding-other-macros" id="embedding-other-macros">Embedding Other Macros</a></h2>
<p>It is possible to automatically execute and embed the output of macro inside another.
This is done by referencing a macro by name in the body of another macro, using the macro call operator.
An example of this is:</p>
<pre><code>This is the calling macro.

#call_other_macro
</code></pre>
<p>Which, assuming there's another macro name <code>call_other_macro</code> available to be executed, could produce the output:</p>
<blockquote>
<p>This is the calling macro.</p>
<p>This is the called macro.</p>
</blockquote>
<p>How macro names get resolved for execution is covered in the section on <a href="scroll/./macro-execution.html">macro execution</a>.</p>
<h2><a class="header" href="#macro-links" id="macro-links">Macro Links</a></h2>
<p>Finally, it is possible to create interactive links to other macros that will run the other macro whenever the link is clicked.
There's two forms of this macro.
The first form is a simple link and the other form is a multi-action link.</p>
<h3><a class="header" href="#simple-links" id="simple-links">Simple Links</a></h3>
<p>Simple links are macro links that when clicked, immediately execute the named macro.
These links take on a form like:</p>
<pre><code>[Click Me!](#other_macro)
</code></pre>
<p>Which would produce the output, containing an interactive link:</p>
<blockquote>
<p><ins>Click Me!</ins></p>
</blockquote>
<p>Clicking the link would then evaluate and execute the macro named <code>#other_macro</code> and produce its output in chat.
This is useful if you want to write macros that can be executed in multiple stages. 
An example of such a macro would be:</p>
<pre><code>&gt; This is documentation on my super cool macro!
&gt; Roll an attack for 1d20 + strength modifier

$str_mod := {% global.ability_mods[self.str] %}

{% self.name %} attacks and rolls *{% 1d20 + str_mod %}*!

[Roll Damage](#roll_damage)
</code></pre>
<h3><a class="header" href="#multi-action-links" id="multi-action-links">Multi-Action Links</a></h3>
<p>The second form of macro links are a form of link, that when clicked, presents the user clicking the link with a set of options for macros to execute, allowing them to select one of the options.
They take on a form like:</p>
<pre><code>[Click Me!](&quot;First Option&quot;: #first_macro, &quot;Second Option&quot;: #second_option)
</code></pre>
<p>This produces the output:</p>
<blockquote>
<p><ins>Click Me!</ins></p>
</blockquote>
<p>Clicking on the link produces a context menu with the options <code>First Option</code> and <code>Second Option</code>.
Clicking one of the options will execute the corresponding macro.</p>
<h1><a class="header" href="#sub-macros" id="sub-macros">Sub-Macros</a></h1>
<p>Scroll macro documents can contain sub-macros that can only be executed by other macros inside the Scroll macro document.
These are useful for creating macros with multiple interaction steps.  Such as:</p>
<pre><code>&gt; This is documentation on my super cool macro!
&gt; Roll an attack for 1d20 + strength modifier

$str_mod := {% global.ability_mods[self.str] %}

{% self.name %} attacks and rolls *{% 1d20 + str_mod %}*!

[Roll Damage](#roll_damage)

== #roll_damage ==
{% self.name %} deals {% 8d6 + str_mod %} slashing damage!
</code></pre>
<p>This creates a macro that contains a named sub-macro <code>#roll_damage</code> that can only be accessed by other macros defined in the document.
As noted all sub-macros are denoted by a header like <code>== #... ==</code> where <code>...</code> is the name being given to the sub-macro.
This header must appear on a line of its own.</p>
<p>Sub-macros have some special rules:</p>
<ul>
<li>They contain all the same sections as other macros, including the documentation section, variables section, and the body section.</li>
<li>They can access all variables declared by the main macro of the document, but not variables declared by other sub-macros.</li>
</ul>
<h1><a class="header" href="#macro-execution" id="macro-execution">Macro Execution</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
